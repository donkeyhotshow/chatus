# üöÄ Chatus v2.0 - –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

## üìã –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–æ

### 1. üì± –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ UI

#### ‚úÖ –ü—Ä–æ00vh –≤–∏—Ä—ñ—à–µ–Ω–∞
- **–ë—É–ª–æ**: –§—ñ–∫—Å–æ–≤–∞–Ω–∞ –≤–∏—Å–æ—Ç–∞ `100vh` –≤–∏–∫–ª–∏–∫–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ—é –≤ Safari/Chrome –Ω–∞ iOS
- **–°—Ç–∞–ª–æ**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `100dvh` (dynamic viewport height) –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- **–§–∞–π–ª–∏**: `src/app/layout.tsx`, `src/app/globals.css`

#### ‚úÖ –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü—ñ—è
- **–ë—É–ª–æ**: –ü—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –ø–æ–ª–µ –≤–≤–µ–¥–µ–Ω–Ω—è –ø–µ—Ä–µ–∫—Ä–∏–≤–∞–ª–æ—Å—è
- **–°—Ç–∞–ª–æ**: Layout –∞–¥–∞–ø—Ç—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Flexbox, input –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤–∏–¥–∏–º–∏–º
- **–§–∞–π–ª–∏**: `src/components/chat/MessageInput.tsx`, `src/app/globals.css`

#### ‚úÖ –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–ë—É–ª–æ**: iOS –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–±–ª–∏–∂–∞–≤ –µ–∫—Ä–∞–Ω –ø—Ä–∏ —Ñ–æ–∫—É—Å—ñ –Ω–∞ input
- **–°—Ç–∞–ª–æ**: –†–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É –≤ –ø–æ–ª—è—Ö –≤–≤–µ–¥–µ–Ω–Ω—è –º—ñ–Ω—ñ–º—É–º 16px
- **–§–∞–π–ª–∏**: `src/components/home/HomeClient.tsx`, `src/app/globals.css`

#### ‚úÖ Touch-–∑–æ–Ω–∏ –∑–±—ñ–ª—å—à–µ–Ω—ñ
- **–ë—É–ª–æ**: –ö–Ω–æ–ø–∫–∏ –±—É–ª–∏ –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª—ñ –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è
- **–°—Ç–∞–ª–æ**: –ú—ñ–Ω—ñ–º—É–º 44px —É –≤–∏—Å–æ—Ç—É (Apple HIG —Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- **–§–∞–π–ª–∏**: `src/app/globals.css`, –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ UI

### 2. üõ°Ô∏è –õ–æ–≥—ñ–∫–∞ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏

#### ‚úÖ –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤—Ö–æ–¥—É
- **–ë—É–ª–æ**: –ö–Ω–æ–ø–∫–∞ "–£–≤—ñ–π—Ç–∏" –∑–∞–≤–∂–¥–∏ –±—É–ª–∞ –∞–∫—Ç–∏–≤–Ω–æ—é
- **–°—Ç–∞–ª–æ**: –ö–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó**:
  - –ù—ñ–∫–Ω–µ–π–º: –º—ñ–Ω—ñ–º—É–º 2 —Å–∏–º–≤–æ–ª–∏
  - –ö–æ–¥ –∫—ñ–º–Ω–∞—Ç–∏: –º—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏
- **–§–∞–π–ª–∏**: `src/components/home/HomeClient.tsx`

#### ‚úÖ –í—ñ–∑—É–∞–ª—å–Ω–∏–π –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫
- **–ë—É–ª–æ**: –ù–µ–º–∞—î —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó –ø–æ–º–∏–ª–æ–∫
- **–°—Ç–∞–ª–æ**: –ö–æ–ª—å–æ—Ä–æ–≤—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- **–§–∞–π–ª–∏**: `src/components/home/HomeClient.tsx`

### 3. üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (Persistence)

#### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **–ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è**: –Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –ü—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –Ω–µ –∑–Ω–∏–∫–∞—î
- **–§–∞–π–ª–∏**:
  - `src/hooks/use-local-storage.tsx` (–Ω–æ–≤–∏–π)
  - `src/hooks/use-chat-persistence.tsx` (–Ω–æ–≤–∏–π)
  - `src/components/chat/ChatArea.tsx` (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)

#### ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –≤—Ö–æ–¥—É
- **–ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è**: –ó–∞–ø–∞–º'—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è –Ω—ñ–∫–Ω–µ–π–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–≤–æ–¥–∏—Ç–∏ –Ω—ñ–∫ —â–æ—Ä–∞–∑—É –∑–∞–Ω–æ–≤–æ
- **–§–∞–π–ª–∏**: `src/components/home/HomeClient.tsx`

#### ‚úÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—î—é
- **–ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- **–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ**: –û—á–∏—â–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- **–§–∞–π–ª–∏**: `src/components/chat/ChatPersistenceStatus.tsx` (–Ω–æ–≤–∏–π)

### 4. ‚öôÔ∏è –†–æ—É—Ç–∏–Ω–≥ —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å

#### ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è 404 –ø–æ–º–∏–ª–æ–∫
- **–ë—É–ª–æ**: –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —á–∞—Ç—É –≤–∏–Ω–∏–∫–∞–ª–∞ –ø–æ–º–∏–ª–∫–∞ "Page Not Found"
- **–°—Ç–∞–ª–æ**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è SPA —Ä–æ—É—Ç–∏–Ω–≥—É
- **–§–∞–π–ª–∏**: `vercel.json`, `next.config.js`

#### ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- **–ë—É–ª–æ**: –ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
- **–°—Ç–∞–ª–æ**: –ù–∞–¥—ñ–π–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –∑ fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∞–º–∏
- **–§–∞–π–ª–∏**: `src/components/home/HomeClient.tsx`

## üéØ –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∑–±–µ—Ä–µ–∂–µ–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∫—ñ–º–Ω–∞—Ç
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—á–∏—â–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó

### üîÑ –û—Ñ–ª–∞–π–Ω –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ª–æ–∫–∞–ª—å–Ω–æ
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### üé® –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π UX
- –ê–Ω—ñ–º–∞—Ü—ñ—ó –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤
- –ö—Ä–∞—â—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å

## üì± –ú–æ–±—ñ–ª—å–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### CSS –∫–ª–∞—Å–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ—ó –∞–¥–∞–ø—Ç–∞—Ü—ñ—ó
```css
.h-screen-dynamic          /* –î–∏–Ω–∞–º—ñ—á–Ω–∞ –≤–∏—Å–æ—Ç–∞ –≤'—é–ø–æ—Ä—Ç–∞ */
.touch-target-enhanced     /* –ü–æ–∫—Ä–∞—â–µ–Ω—ñ touch targets */
.mobile-input             /* –ü—Ä–∞–≤–∏–ª—å–Ω—ñ input –ø–æ–ª—è */
.keyboard-adaptive-container /* –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ */
.mobile-safe-area-full    /* –ë–µ–∑–ø–µ—á–Ω—ñ –∑–æ–Ω–∏ –¥–ª—è iPhone */
```

### Responsive breakpoints
- `max-width: 360px` - –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∏
- `max-width: 414px` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∏
- `max-width: 768px` - –í–µ–ª–∏–∫—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∏ —Ç–∞ –º–∞–ª—ñ –ø–ª–∞–Ω—à–µ—Ç–∏
- `min-width: 768px` - –ü–ª–∞–Ω—à–µ—Ç–∏ —Ç–∞ –¥–µ—Å–∫—Ç–æ–ø

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ù–æ–≤—ñ —Ö—É–∫–∏
- `useLocalStorage` - –†–æ–±–æ—Ç–∞ –∑ localStorage
- `useSessionStorage` - –†–æ–±–æ—Ç–∞ –∑ sessionStorage
- `useChatPersistence` - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É
- `useUserPreferences` - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –£—Ç–∏–ª—ñ—Ç–∏
- `localStorageUtils` - –ü—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ localStorage
- `chatPersistenceUtils` - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—î—é —á–∞—Ç—ñ–≤

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- –û–Ω–æ–≤–ª–µ–Ω–∞ `vercel.json` –¥–ª—è SPA —Ä–æ—É—Ç–∏–Ω–≥—É
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ `next.config.js` –∑ rewrites
- –ù–æ–≤—ñ CSS –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ—ó –∞–¥–∞–ø—Ç–∞—Ü—ñ—ó

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage. –ú–∞–∫—Å–∏–º—É–º 100 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–∞ –∫—ñ–º–Ω–∞—Ç—É, –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è 7 –¥–Ω—ñ–≤.

### 2. –û—á–∏—â–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó
```typescript
import { useChatPersistence } from '@/hooks/use-chat-persistence';

const { clearHistory, clearAllHistory } = useChatPersistence(roomId);

// –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ—Ç–æ—á–Ω–æ—ó –∫—ñ–º–Ω–∞—Ç–∏
clearHistory();

// –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é
clearAllHistory();
```

### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```typescript
import { chatPersistenceUtils } from '@/hooks/use-chat-persistence';

// –û—Ç—Ä–∏–º–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä —ñ—Å—Ç–æ—Ä—ñ—ó –≤ –±–∞–π—Ç–∞—Ö
const size = chatPersistenceUtils.getHistorySize();

// –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∫—ñ–º–Ω–∞—Ç
const rooms = chatPersistenceUtils.getAllRooms();
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–Ü–¥–µ–∞–ª—å–Ω–∏–π –º–æ–±—ñ–ª—å–Ω–∏–π –¥–æ—Å–≤—ñ–¥** - –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤–∏—Å–æ—Ç–∞ –≤'—é–ø–æ—Ä—Ç–∞, –∞–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚úÖ **–ù–∞–¥—ñ–π–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** - –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—Ö–æ–¥—É, –≤—ñ–∑—É–∞–ª—å–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏
‚úÖ **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö** - –Ü—Å—Ç–æ—Ä—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚úÖ **–°—Ç–∞–±—ñ–ª—å–Ω–∏–π —Ä–æ—É—Ç–∏–Ω–≥** - –ù–µ–º–∞—î 404 –ø–æ–º–∏–ª–æ–∫, –Ω–∞–¥—ñ–π–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å** - –ö—Ä–∞—â—ñ touch targets, focus —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

Chatus v2.0 —Ç–µ–ø–µ—Ä –≥–æ—Ç–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∑ —ñ–¥–µ–∞–ª—å–Ω–∏–º –º–æ–±—ñ–ª—å–Ω–∏–º –¥–æ—Å–≤—ñ–¥–æ–º! üéä
