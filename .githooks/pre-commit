#!/usr/bin/env bash
# Pre-commit hook: quick secrets scan
set -euo pipefail
HOOK_DIR="$(cd "$(dirname "$0")" && pwd)"
REPO_ROOT="$(cd "$HOOK_DIR/.." && pwd)"
cd "$REPO_ROOT"

if [ -x "./scripts/check-secrets.sh" ]; then
  echo "Running quick secrets check..."
  ./scripts/check-secrets.sh
  rc=$?
  if [ $rc -ne 0 ]; then
    echo "Pre-commit: secrets check failed. Fix or stash changes before committing."
    exit $rc
  fi
else
  echo "Pre-commit: scripts/check-secrets.sh not found or not executable; skipping."
fi

exit 0


